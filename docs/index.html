<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover"
    />
    <title>AR Camera</title>
    <style>
      /* ----- your existing fullscreen camera styles (shortened to essentials) ----- */
      * { margin:0; padding:0; box-sizing:border-box; }
      body {
        font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
        background:#000; color:#fff; min-height:100vh; min-height:100dvh; overflow:hidden;
      }
      .camera-container {
        position: fixed; inset: 0; width:100vw; height:100dvh; background:#000; overflow:hidden;
      }
      #live-canvas { width:100% !important; height:100% !important; object-fit:cover; display:block; background:#000; }

      /* ----- views ----- */
      .view.hidden { display:none !important; }
      .section-title{ margin:14px 4px 10px; font-size:22px }
      .muted{ color:#bbb } .center{ text-align:center }

      /* overlay tool buttons */
      .tool-btn{
        appearance:none; border:1px solid rgba(255,255,255,.28);
        background: rgba(0,0,0,.35); color:#fff; padding:8px 10px; border-radius:10px; font-weight:700;
      }

      /* capture button */
      .primary-btn{
        appearance:none; border:0; cursor:pointer; padding:10px 16px; border-radius:10px; font-weight:700;
        background:#7df2c9; color:#0b0b0b;
      }

      /* ----- bottom nav (same look&feel) ----- */
      .bottom-nav{
        position:fixed; left:0; right:0; bottom:0; z-index:20;
        display:grid; grid-template-columns:repeat(4,1fr);
        background: rgba(18,19,23,.85);
        backdrop-filter: blur(10px);
        border-top:1px solid rgba(255,255,255,.12);
        padding:8px 10px calc(10px + env(safe-area-inset-bottom));
        min-height:72px;
      }
      .nav-btn{
        appearance:none; border:0; background:transparent; color:#fff;
        display:flex; flex-direction:column; align-items:center; justify-content:center;
        gap:6px; padding:6px 4px; cursor:pointer; min-width:0;
      }
      .nav-btn .icon{ width:28px; height:28px; display:block; }
      .nav-btn .icon img{ width:100%; height:100%; object-fit:contain; display:block; }
      .nav-btn .label{ font-size:12px; line-height:1; opacity:.9 }
      .nav-btn.active .label{ font-weight:700; opacity:1 }

      /* backpack grid */
      .bag-grid{
        position:relative; z-index:1;
        max-width:980px; margin: 88px auto 90px; /* leave room for bottom nav */
        display:grid; gap:14px; grid-template-columns: repeat(auto-fit, minmax(110px,1fr));
      }
      .bag-item{ background: rgba(255,255,255,.06); border:1px solid rgba(255,255,255,.12); border-radius:12px; padding:10px; text-align:center; }
      .bag-thumb{ width:100%; aspect-ratio:1/1; border-radius:10px; background:#111 center/cover no-repeat; margin-bottom:8px; }

      /* photo preview overlay (kept from your friendâ€™s code) */
      .photo-preview{ position:fixed; inset:0; background:#000; display:none; z-index:200; flex-direction:column; justify-content:center; align-items:center; }
      .photo-preview.show{ display:flex; }
      .photo-preview img{ max-width:100%; max-height:100%; object-fit:contain; border-radius:8px; }
      .photo-preview-controls{ position:fixed; bottom:calc(90px + env(safe-area-inset-bottom)); left:50%; transform:translateX(-50%); display:flex; gap:20px; z-index:201; }
      .preview-button{ background:#fff; color:#000; border:none; border-radius:25px; padding:12px 20px; font-weight:700; }

      /* small overlay tools on camera (top-right) */
      .overlay-tools{ position:fixed; top:12px; right:12px; display:flex; gap:8px; z-index:30; }
      .capture-wrap{ position:fixed; left:50%; transform:translateX(-50%); bottom:calc(84px + env(safe-area-inset-bottom)); z-index:30; }
    </style>
    <script type="module" crossorigin src="/SiliconBayouWebApp/assets/main-CEWgO8se.js"></script>
    <link rel="modulepreload" crossorigin href="/SiliconBayouWebApp/assets/modulepreload-polyfill-B5Qt9EMX.js">
  </head>
  <body>
    <!-- CAMERA VIEW (default) -->
    <main id="camera-view" class="view" role="main" aria-live="polite" style="padding:0;">
      <div class="camera-container">
        <div id="canvas-output">Startingâ€¦</div>

        <!-- overlay controls -->
        <div class="overlay-tools">
          <button id="btn-toggle-aspect" class="tool-btn" title="Toggle Aspect">3:4</button>
          <button id="btn-switch-cam" class="tool-btn" title="Switch Camera">Rear</button>
        </div>
        <div class="capture-wrap">
          <button id="captureButton" class="primary-btn">Capture</button>
        </div>
      </div>

      <!-- Photo Preview -->
      <div class="photo-preview" id="photoPreview">
        <img id="previewImage" alt="Captured Photo" />
        <div class="photo-preview-controls">
          <button class="preview-button" id="retakeButton">âœ•</button>
          <button class="preview-button" id="saveButton">ðŸ“¤</button>
        </div>
      </div>
    </main>

    <!-- BACKPACK -->
    <section id="backpack-view" class="view hidden" aria-label="Backpack">
      <h1 class="section-title" style="margin:84px 16px 8px;">Backpack</h1>
      <div id="bag-grid" class="bag-grid"></div>
      <p class="muted center" id="bag-empty" style="margin-bottom:90px;">You havenâ€™t collected anything yet.</p>
    </section>

    <!-- SETTINGS -->
    <section id="settings-view" class="view hidden" aria-label="Settings" style="padding:88px 16px 96px;">
      <h1 class="section-title">Settings</h1>
      <div style="display:flex; flex-direction:column; gap:12px; max-width:980px; margin:10px auto 0;">
        <button id="btn-reset-app" class="tool-btn" style="padding:12px 14px; border-radius:12px; background:rgba(220,0,0,.25); border-color:rgba(220,0,0,.4);">
          Reset App (Clear Gallery)
        </button>
      </div>
    </section>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav" aria-label="Primary">
      <button id="tab-bayou" class="nav-btn active" data-tab="bayou">
        <span class="icon"><img src="images/alligator.png" alt="Bayou" /></span>
        <span class="label">Bayou</span>
      </button>
      <button id="tab-photo" class="nav-btn" data-tab="photo">
        <span class="icon"><img src="images/photo.png" alt="Photo-Booth" /></span>
        <span class="label">Photo-Booth</span>
      </button>
      <button id="tab-bag" class="nav-btn" data-tab="bag">
        <span class="icon"><img src="images/backpack.png" alt="Backpack" /></span>
        <span class="label">Gallery</span>
      </button>
      <button id="tab-settings" class="nav-btn" data-tab="settings">
        <span class="icon"><img src="images/settings.png" alt="Settings" /></span>
        <span class="label">Settings</span>
      </button>
    </nav>

    <!-- Background Audio (kept) -->
    <audio id="backgroundAudio" loop preload="auto">
      <source src="/SiliconBayouWebApp/assets/bayouaudio_fixed-DZXiEN0d.mp3" type="audio/mp3" />
    </audio>

  </body>
</html>
